#include <stdio.h>
#include <string.h>
#include <stdlib.h>
char * estado[27] =
{"AC","AL","AM","AP","BA","CE","DF","ES","GO","MA","MG","MS","MT","PA",
"PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"};
typedef struct assalariados {
char nome[51];
char sexo;
int idade;
float salario;
char estado[3];
} Assalariados;



Assalariados * cadastra(char *nome, char sexo, int idade, float
salario, char *estado){//aloca um novo ponteiro do tipo Assalariados que armazena as informações de pessoas
int i;
Assalariados *ptr = (Assalariados*)malloc(sizeof(Assalariados));
if (ptr==NULL)exit(1);

strcpy(ptr->nome,nome);//maneira um de registrar vetores de str
ptr->sexo = sexo;
ptr->idade = idade;
ptr->salario = salario;
for (i=0;i<3&&estado[i]!='\0';i++){//maneira2 de registrar vetores de str
    ptr->estado[i]=estado[i];
}
ptr->estado[i]='\0';

return ptr;
}

void relatorio(Assalariados ** ptr, int numAssalariados){
int i,j;

for (j=0;j<27;j++){
int cont = 0;
for (i=0;i<numAssalariados;i++){
    if((ptr[i]->idade)>40&&(ptr[i]->salario)>100&&(ptr[i]->sexo)=='H'&&(strcmp(ptr[i]->estado,estado[j]))==0) cont++;

}
if (cont>0) printf("\nEstado=%s com %d homens maiores de 40 anos e salário maior que R$ 1000,00",estado[j],cont);
}
}


void imprime(Assalariados ** ptr, int numAssalariados){
int i;
for (i=0;i<numAssalariados;i++){
printf("\nPessoa numero %d",i+1);
printf("\nNome: %s",ptr[i]->nome);
printf("\nSexo (H/M): %c",ptr[i]->sexo);
printf("\nIdade: %d",ptr[i]->idade);
printf("\nSalário: %f",ptr[i]->salario);
printf("\nEstado: %s\n",ptr[i]->estado);

}
}


int main(void) {
Assalariados **pessoas;
int numAssalariados=3;
int i;
pessoas = (Assalariados **) malloc (numAssalariados *
sizeof(Assalariados *));
pessoas[0] = cadastra("Fulano de tal", 'H',45,1500.00, "RJ");
pessoas[1] = cadastra("Ciclano", 'H',50,2500.00, "RS");
pessoas[2] = cadastra("Beltrano", 'H',42,500.00, "RS");
imprime(pessoas, numAssalariados);
relatorio(pessoas,numAssalariados);

//liberar a memoria a alocada
for (i=0;i<numAssalariados;i++){
    free(pessoas[i]);

}
free(pessoas);
return 0;

}
